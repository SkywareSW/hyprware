# ─────────────────────────────────────────
#  hyprware — hyprland.conf
#  catppuccin mocha · skywareOS
# ─────────────────────────────────────────

# ── MONITORS ─────────────────────────────
# change to match your setup
# format: monitor=name,resolution,position,scale
monitor=,preferred,auto,1

# ── AUTOSTART ────────────────────────────
exec-once = waybar
exec-once = dunst
exec-once = hypridle
exec-once = swww-daemon
exec-once = bash ~/.config/hypr/scripts/wallpaper.sh
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store

# ── ENVIRONMENT ──────────────────────────
env = XCURSOR_SIZE,24
env = XCURSOR_THEME,Catppuccin-Mocha-Dark-Cursors
env = QT_QPA_PLATFORMTHEME,qt5ct
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = GDK_BACKEND,wayland,x11
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland

# ── INPUT ────────────────────────────────
input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1
    mouse_refocus = false
    sensitivity = 0

    touchpad {
        natural_scroll = yes
        disable_while_typing = true
        tap-to-click = true
        scroll_factor = 0.8
    }
}

# ── GENERAL ──────────────────────────────
general {
    gaps_in = 4
    gaps_out = 10
    border_size = 2

    col.active_border   = rgba(89b4facc) rgba(cba6f7cc) 45deg
    col.inactive_border = rgba(1e1e2eaa)

    layout = dwindle
    allow_tearing = false
}

# ── DECORATION ───────────────────────────
decoration {
    rounding = 10

    blur {
        enabled = true
        size = 12
        passes = 4
        new_optimizations = true
        xray = false
        noise = 0.015
        contrast = 0.85
        brightness = 0.7
        ignore_opacity = false
    }

    drop_shadow = true
    shadow_range = 24
    shadow_render_power = 4
    shadow_color = rgba(0a0a0eee)
    shadow_offset = 0 6

    dim_inactive = true
    dim_strength = 0.15

    active_opacity = 0.92
    inactive_opacity = 0.80
}

# ── ANIMATIONS ───────────────────────────
animations {
    enabled = yes

    bezier = myBezier,   0.05, 0.9,  0.1,  1.05
    bezier = linear,     0.0,  0.0,  1.0,  1.0
    bezier = overshot,   0.13, 0.99, 0.29, 1.1
    bezier = smoothOut,  0.36, 0,    0.66, -0.56
    bezier = smoothIn,   0.25, 1,    0.5,  1
    bezier = easeOut,    0.16, 1,    0.3,  1
    bezier = easeIn,     0.7,  0,    0.84, 0
    bezier = bounce,     0.34, 1.56, 0.64, 1

    # windows open with a pop + bounce, close with a fade-shrink
    animation = windows,          1, 5,  bounce,    popin 60%
    animation = windowsOut,       1, 4,  easeIn,    popin 80%
    animation = windowsMove,      1, 4,  easeOut,   slide

    # borders animate their gradient angle continuously
    animation = border,           1, 10, default
    animation = borderangle,      1, 180, linear,   loop

    # fade
    animation = fade,             1, 4,  easeOut
    animation = fadeIn,           1, 4,  easeOut
    animation = fadeOut,          1, 3,  easeIn
    animation = fadeDim,          1, 4,  easeOut

    # workspace slide with overshoot
    animation = workspaces,       1, 5,  overshot,  slide
    animation = specialWorkspace, 1, 4,  myBezier,  slidevert
}

# ── LAYOUTS ──────────────────────────────
dwindle {
    pseudotile = yes
    preserve_split = yes
    smart_split = no
    smart_resizing = yes
}

master {
    new_is_master = true
    mfact = 0.55
}

# ── MISC ─────────────────────────────────
misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
    disable_splash_rendering = true
    vrr = 0
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
    animate_manual_resizes = true
}

# ── WINDOW RULES ─────────────────────────
windowrulev2 = opacity 0.82 0.72, class:^(kitty)$
windowrulev2 = opacity 0.88 0.78, class:^(thunar)$
windowrulev2 = opacity 0.88 0.78, class:^(rofi)$
windowrulev2 = opacity 0.90 0.80, class:^(discord)$
windowrulev2 = opacity 0.90 0.80, class:^(code)$
windowrulev2 = opacity 0.90 0.80, class:^(Code)$

# floating windows
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = float, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = float, class:^(polkit-gnome-authentication-agent-1)$
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = float, class:^(org.gnome.Calculator)$
windowrulev2 = float, class:^(nemo)$, title:^(Properties)$

# sizing for floating windows
windowrulev2 = size 800 600,   class:^(pavucontrol)$
windowrulev2 = size 400 200,   class:^(polkit-gnome-authentication-agent-1)$
windowrulev2 = size 700 500,   class:^(blueman-manager)$

# center certain floats
windowrulev2 = center, class:^(polkit-gnome-authentication-agent-1)$
windowrulev2 = center, class:^(org.gnome.Calculator)$
windowrulev2 = center, class:^(blueman-manager)$

# pin PiP
windowrulev2 = pin,   title:^(Picture-in-Picture)$
windowrulev2 = move 75% 6%, title:^(Picture-in-Picture)$

# no shadow on tiled windows (performance)
windowrulev2 = noshadow, floating:0

# fix xwayland apps
windowrulev2 = rounding 0, xwayland:1, floating:0
windowrulev2 = center,     class:^(.*jetbrains.*)$, title:^(Confirm Exit|Open Project|win424|win201)$
windowrulev2 = float,      class:^(.*jetbrains.*)$, title:^(Confirm Exit|Open Project|win424|win201)$
windowrulev2 = float, class:^(rofi)$
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = pin,   title:^(Picture-in-Picture)$
windowrulev2 = float, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = float, class:^(polkit-gnome-authentication-agent-1)$
windowrulev2 = center, class:^(polkit-gnome-authentication-agent-1)$
windowrulev2 = size 400 200, class:^(polkit-gnome-authentication-agent-1)$

# make firefox/brave PiP float
windowrulev2 = float, title:^(Firefox)$, class:^(Popup)$

# ── KEYBINDINGS ──────────────────────────
$mainMod = SUPER
$term    = kitty
$menu    = rofi -show drun -show-icons
$files   = thunar
$browser = firefox
$scripts = ~/.config/hypr/scripts

# core
bind = $mainMod,       Return, exec, $term
bind = $mainMod,       Space,  exec, $menu
bind = $mainMod,       E,      exec, $files
bind = $mainMod,       B,      exec, $browser
bind = $mainMod,       Q,      killactive,
bind = $mainMod SHIFT, E,      exit,
bind = $mainMod,       F,      fullscreen, 0
bind = $mainMod,       V,      togglefloating,
bind = $mainMod,       P,      pseudo,
bind = $mainMod,       J,      togglesplit,

# lock screen
bind = $mainMod,       Escape, exec, hyprlock
bind = $mainMod SHIFT, Escape, exec, bash $scripts/powermenu.sh 2>/dev/null || rofi -show power-menu -modi "power-menu:$scripts/../../rofi/scripts/powermenu.sh"

# clipboard history (requires cliphist + rofi)
bind = $mainMod,       C,      exec, cliphist list | rofi -dmenu -p "󰅍 clipboard" -theme ~/.config/rofi/theme.rasi | cliphist decode | wl-copy

# wallpaper cycle
bind = $mainMod SHIFT, W,      exec, bash $scripts/wallpaper.sh

# reload config
bind = $mainMod CTRL,  R,      exec, hyprctl reload && notify-send "hyprland" "config reloaded" --urgency=low

# screenshot
bind = ,               Print,  exec, bash $scripts/screenshot.sh full
bind = $mainMod SHIFT, S,      exec, bash $scripts/screenshot.sh region
bind = $mainMod,       Print,  exec, bash $scripts/screenshot.sh window
bind = $mainMod SHIFT, Print,  exec, bash $scripts/screenshot.sh edit

# special workspace (scratchpad)
bind = $mainMod,       S,      togglespecialworkspace, magic
bind = $mainMod SHIFT, S,      movetoworkspace, special:magic

# focus movement (vim-style)
bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d

# also arrow keys
bind = $mainMod, left,  movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up,    movefocus, u
bind = $mainMod, down,  movefocus, d

# move windows
bind = $mainMod SHIFT, H, movewindow, l
bind = $mainMod SHIFT, L, movewindow, r
bind = $mainMod SHIFT, K, movewindow, u
bind = $mainMod SHIFT, J, movewindow, d

# workspaces 1–9
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# move window to workspace
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# silent move (move without switching to workspace)
bind = $mainMod CTRL, 1, movetoworkspacesilent, 1
bind = $mainMod CTRL, 2, movetoworkspacesilent, 2
bind = $mainMod CTRL, 3, movetoworkspacesilent, 3
bind = $mainMod CTRL, 4, movetoworkspacesilent, 4
bind = $mainMod CTRL, 5, movetoworkspacesilent, 5

# scroll through workspaces
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up,   workspace, e-1
bind = $mainMod, Tab,        workspace, e+1
bind = $mainMod SHIFT, Tab,  workspace, e-1

# move/resize with mouse
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# resize submap
bind = $mainMod, R, submap, resize
submap = resize
binde = , H, resizeactive, -30 0
binde = , L, resizeactive,  30 0
binde = , K, resizeactive, 0 -30
binde = , J, resizeactive, 0  30
binde = , left,  resizeactive, -30 0
binde = , right, resizeactive,  30 0
binde = , up,    resizeactive, 0 -30
binde = , down,  resizeactive, 0  30
bind  = , escape, submap, reset
bind  = , Return, submap, reset
submap = reset

# volume — use scripts for OSD notifications
bindel = , XF86AudioRaiseVolume, exec, bash $scripts/volume.sh up
bindel = , XF86AudioLowerVolume, exec, bash $scripts/volume.sh down
bindl  = , XF86AudioMute,        exec, bash $scripts/volume.sh mute
bindl  = , XF86AudioMicMute,     exec, pamixer --default-source -t

# brightness — use scripts for OSD notifications
bindel = , XF86MonBrightnessUp,   exec, bash $scripts/brightness.sh up
bindel = , XF86MonBrightnessDown, exec, bash $scripts/brightness.sh down

# media keys
bindl = , XF86AudioPlay,  exec, playerctl play-pause
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioNext,  exec, playerctl next
bindl = , XF86AudioPrev,  exec, playerctl previous
